@model ProfileViewModel

 @foreach (var item in Model.PostList)
{
    <div class="well" id="newsFeedPost">
        
        <div class="pull-right"> @item.CREATED_DATE.ToString("MMMM dd, yyyy hh:mm tt") </div>
        @Html.Hidden("postID", item.ID, new { id = "postID" })
        @Html.Hidden("PosterID", item.POSTER_ID, new { id = "posterID" })
        @if (item.POSTER_ID == item.PROFILE_OWNER_ID)
        {
            <div>
                @Html.Label(@item.PB_USER.FIRST_NAME) @Html.Label(@item.PB_USER.LAST_NAME)
            </div>
        }
        else
        {
            <div>
                @Html.Label(@item.PB_USER.FIRST_NAME) @Html.Label(@item.PB_USER.LAST_NAME)> @Html.Label(@item.PB_USER1.FIRST_NAME) @Html.Label(@item.PB_USER1.LAST_NAME)
            </div>
        }
        <p class="postField">
            @item.CONTENT
        </p>

        <div id="field">
  


            <button data-toggle="popover" title="Liked By:" data-trigger="hover" class="likeList btn-sm btn-default" data-content="@foreach (var like in item.PB_LIKE)
	{
		@like.PB_USER.FIRST_NAME @like.PB_USER.LAST_NAME @Html.DisplayName(", ")
	}">
                @item.PB_LIKE.Count()
                <span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>
            </button>

            @if (item.PB_LIKE.Any(x => x.LIKED_BY == (int)Session["ID"]))
            {
                <button class="unlikeButton btn-sm btn-success" value=@item.PB_LIKE.Where(x=>x.LIKED_BY == (int)Session["ID"]).FirstOrDefault().ID><span class="glyphicon glyphicon-thumbs-down" aria-hidden="true"></span>Unlike</button>
            }
            else
            {
                <button class="likeButton btn-sm btn-primary" value=@item.ID><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span> Like</button>
            }

            <button class="CommentButton btn-sm btn-primary" value=@item.ID><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>Comment</button><br />
          
            <div id="commentField">

                @Html.TextArea("Message", new { rows = 2, columns = 40, @class = "textAreaComment form-control", id = "commentArea", value = @item.ID, placeholder = "Write a comment.." })
            </div>
            @foreach (var comment in item.PB_COMMENT)
            {
                <div>
                    <div>
                        @Html.DisplayName(@comment.PB_USER.FIRST_NAME) @Html.DisplayName(@comment.PB_USER.LAST_NAME)
                    </div>
                    <div class="commentList">
                        @Html.DisplayName(@comment.CONTENT)
                    </div>
                </div>
            }
        </div>
    </div>
}


